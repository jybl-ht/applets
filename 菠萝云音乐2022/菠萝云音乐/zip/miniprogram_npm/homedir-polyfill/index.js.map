{"version":3,"sources":["index.js","polyfill.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\n\nvar os = require('os');\nif (typeof os.homedir !== 'undefined') {\n  module.exports = os.homedir;\n} else {\n  module.exports = require('./polyfill.js');\n}\n\n","\n\nvar fs = require('fs');\nvar parse = require('parse-passwd');\n\nfunction homedir() {\n  // The following logic is from looking at logic used in the different platform\n  // versions of the uv_os_homedir function found in https://github.com/libuv/libuv\n  // This is the function used in modern versions of node.js\n\n  if (process.platform === 'win32') {\n    // check the USERPROFILE first\n    if (process.env.USERPROFILE) {\n      return process.env.USERPROFILE;\n    }\n\n    // check HOMEDRIVE and HOMEPATH\n    if (process.env.HOMEDRIVE && process.env.HOMEPATH) {\n      return process.env.HOMEDRIVE + process.env.HOMEPATH;\n    }\n\n    // fallback to HOME\n    if (process.env.HOME) {\n      return process.env.HOME;\n    }\n\n    return null;\n  }\n\n  // check HOME environment variable first\n  if (process.env.HOME) {\n    return process.env.HOME;\n  }\n\n  // on linux platforms (including OSX) find the current user and get their homedir from the /etc/passwd file\n  var passwd = tryReadFileSync('/etc/passwd');\n  var home = find(parse(passwd), getuid());\n  if (home) {\n    return home;\n  }\n\n  // fallback to using user environment variables\n  var user = process.env.LOGNAME || process.env.USER || process.env.LNAME || process.env.USERNAME;\n\n  if (!user) {\n    return null;\n  }\n\n  if (process.platform === 'darwin') {\n    return '/Users/' + user;\n  }\n\n  return '/home/' + user;\n}\n\nfunction find(arr, uid) {\n  var len = arr.length;\n  for (var i = 0; i < len; i++) {\n    if (+arr[i].uid === uid) {\n      return arr[i].homedir;\n    }\n  }\n}\n\nfunction getuid() {\n  if (typeof process.geteuid === 'function') {\n    return process.geteuid();\n  }\n  return process.getuid();\n}\n\nfunction tryReadFileSync(fp) {\n  try {\n    return fs.readFileSync(fp, 'utf8');\n  } catch (err) {\n    return '';\n  }\n}\n\nmodule.exports = homedir;\n\n"]}